<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Heizung-Rechner</title>

<style>
body {
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 900px;
}

label {
    display: block;
    margin: 8px 0;
}

input {
    width: 160px;
}

button {
    margin-top: 10px;
    padding: 6px 12px;
}

table {
    border-collapse: collapse;
    margin-top: 20px;
    width: 100%;
}

th, td {
    border: 1px solid #ccc;
    padding: 6px;
    text-align: right;
}

th {
    background-color: #eee;
}

.break-even {
    font-weight: bold;
    margin-top: 20px;
}

.note {
    margin-top: 6px;
    font-style: italic;
}
</style>
</head>

<body>

<h2>Wärmepumpe vs. Gas/Öl – Break-even Rechner</h2>

<label>Gas/Ölpreis heute (€/kWh):
<input type="number" id="gasPrice" value="0.10" step="0.01"></label>

<label>Preissteigerung von Öl/Gas (% p.a.):
<input type="number" id="gasInflation" value="3" step="0.1"></label>

<label>Jahresverbrauch (kWh/Jahr):
<input type="number" id="gasConsumption" value="14500"></label>

<label>JAZ Wärmepumpe:
<input type="number" id="wpJAZ" value="3.5" step="0.1"></label>

<label>Strompreis WP (€/kWh):
<input type="number" id="electricityPrice" value="0.30" step="0.01"></label>

<label>Investitionskosten für WP (€):
<input type="number" id="investment" value="17000"></label>

<label>Zinssatz bei Anlage (% p.a.):
<input type="number" id="interestRate" value="3" step="0.1"></label>

<button onclick="calculate()">Berechnen</button>

<div id="result"></div>

<script>
function calculate() {

    var gasPrice0 = Number(document.getElementById("gasPrice").value);
    var gasInflation = Number(document.getElementById("gasInflation").value) / 100;
    var gasConsumption = Number(document.getElementById("gasConsumption").value);
    var wpJAZ = Number(document.getElementById("wpJAZ").value);
    var electricityPrice = Number(document.getElementById("electricityPrice").value);
    var investment = Number(document.getElementById("investment").value);
    var interestRate = Number(document.getElementById("interestRate").value) / 100;

    var wpCost = (gasConsumption / wpJAZ) * electricityPrice;

    var cumulativeSaving = 0;
    var breakEvenYear = null;

    var tableHTML = '<table><tr>' +
        '<th>Jahr</th>' +
        '<th>HK-preis €/kWh</th>' +
        '<th>HK-Kosten €</th>' +
        '<th>WP-Kosten €</th>' +
        '<th>Ersparnis €</th>' +
        '<th>Kumuliert €</th>' +
        '<th>Anlagewert\nnach Kosten €</th>' +
        '</tr>';

    // feste Laufzeit für Anzeige (z. B. 30 Jahre)
    for (var year = 1; year <= 30; year++) {

        var gasPriceYear = gasPrice0 * Math.pow(1 + gasInflation, year - 1);
        var gasCost = gasConsumption * gasPriceYear;
        var saving = gasCost - wpCost;

        cumulativeSaving += saving;

        var investedValue = investment * Math.pow(1 + interestRate, year);
        var netAssetValue = investedValue - cumulativeSaving;

        if (breakEvenYear === null && cumulativeSaving >= investment) {
            breakEvenYear = year;
        }

        tableHTML += '<tr>' +
            '<td>' + year + '</td>' +
            '<td>' + gasPriceYear.toFixed(3) + '</td>' +
            '<td>' + gasCost.toFixed(0) + '</td>' +
            '<td>' + wpCost.toFixed(0) + '</td>' +
            '<td>' + saving.toFixed(0) + '</td>' +
            '<td>' + cumulativeSaving.toFixed(0) + '</td>' +
            '<td>' + netAssetValue.toFixed(0) + '</td>' +
            '</tr>';
    }

    tableHTML += '</table>';

    var resultHTML = '';

    if (breakEvenYear !== null) {
        var investedAtBE = investment * Math.pow(1 + interestRate, breakEvenYear);
        var netAtBE = investedAtBE - cumulativeSaving;

        resultHTML += '<div class="break-even">';
        resultHTML += 'Break-even nach ca. ' + breakEvenYear + ' Jahren';
        resultHTML += '</div>';

        resultHTML += '<div class="note">';
        resultHTML += 'Anlagewert bei ' + breakEvenYear + ' Jahren abzüglich Gas/Öl-Mehrkosten: ';
        resultHTML += netAtBE.toFixed(0) + ' €';
        resultHTML += '</div>';
    } else {
        resultHTML += '<div class="break-even">';
        resultHTML += 'Kein Break-even innerhalb von 30 Jahren erreicht';
        resultHTML += '</div>';
    }

    document.getElementById("result").innerHTML = resultHTML + tableHTML;
}
</script>

</body>
</html>
